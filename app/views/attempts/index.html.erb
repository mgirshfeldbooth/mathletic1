
<% current_exercise = Exercise.where( :difficulty => cookies.fetch(:user_level) ).shuffle.first %>

<div class="container">
  <div class="row prompt">
    <div class="col-md-12 text-center">

      <%= current_exercise.question %>

   
    </div>
  </div>
  
  <div class="row">
    <div class="col-md-12 text-center">

   Difficulty:
      <%= current_exercise.difficulty %>
   
    </div>
  </div>

  <div class="row">
    <div class="col-md-12 text-center">
      <form action="/insert_attempt" method="post">

        <%= hidden_field_tag "starting_timestamp", @starting_timestamp %>

        <div>
          <label for="submission_box">
            Submission
          </label>

          <input type="text" id="submission_box" name="query_submission" autofocus>
        </div>

        <div>
          <input type="hidden" id="user_id_box" name="query_user_id" value=<%= session.fetch(:user_id) %>>
        </div>

        <div>
          <input type="hidden" id="exercise_id_box" name="query_exercise_id" value="<%= current_exercise.id %>">
        </div>

        <div>
          <input type="hidden" id="round_id_box" name="query_round_id" value="<%= cookies.fetch(:current_round) %>">
        </div>


        <button class="btn btn-primary btn-lg">
          Submit
        </button>
      </form>
    
    </div>
  </div>
</div>

<div>
  <h1>
    
  </h1>
</div>


<div>

</div>

<br>
<div>

</div>

<pre>






</pre>
<hr>


<div>
  <div>
    <h1>
      List of all attempts
    </h1>
  </div>
</div>

<hr>

<div>
  <div>
    <h2>
      Add a new attempt
    </h2>

    
  </div>
</div>

<hr>
<div>
  <div>
    <table border="1">
      <tr>
        <th>
          ID
        </th>

        <th>
          Correct
        </th>

        <th>
          Started at
        </th>

        <th>
          Finished at
        </th>

        <th>
          Submission
        </th>

        <th>
          User
        </th>

        <th>
          Exercise
        </th>

        <th>
          Round
        </th>

        <th>
          Created at
        </th>

        <th>
          Updated at
        </th>

        <th>
        </th>
      </tr>

      <% @list_of_attempts.each do |an_attempt| %>
      <tr>
        <td>
          <%= an_attempt.id %>
        </td>

        <td>
          <%= an_attempt.correct %>
        </td>

        <td>
          <%= an_attempt.started_at %>
        </td>

        <td>
          <%= an_attempt.finished_at %>
        </td>

        <td>
          <%= an_attempt.submission %>
        </td>

        <td>
          <%= an_attempt.user_id %>
        </td>

        <td>
          <%= an_attempt.exercise_id %>
        </td>

        <td>
          <%= an_attempt.round_id %>
        </td>

        <td>
          <%= time_ago_in_words(an_attempt.created_at) %> ago
        </td>
        <td>
          <%= time_ago_in_words(an_attempt.updated_at) %> ago
        </td>

        <td>
          <a href="/attempts/<%= an_attempt.id %>">
            Show details
          </a>
        </td>
      </tr>
      <% end %>
    </table>
  </div>
</div>

<hr>
